{% extends 'base.html' %}

{% block content %}
    <div style="display: flex;">
        <div style="flex: 1;">
            <h2>User List</h2>
            <ul>
                {% for user in users %}
                    <li><a href="{% url 'send_message' user.id %}">{{ user.username }}</a></li>
                {% endfor %}
            </ul>
        </div>
        <div style="flex: 2;">
            <h2>Conversation</h2>
            {% if receiver %}
                <h3>{{ receiver.username }}</h3>
                {% for message in messages %}
                    <p>{{ message.sender.username }}: {{ message.content }}</p>
                {% endfor %}
                <form method="post" action="{% url 'send_message' receiver.id %}">
                    {% csrf_token %}
                    <input type="text" name="content">
                    <input type="submit" value="Send">
                </form>
            {% else %}
                <p>Select a user to start a conversation.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}
